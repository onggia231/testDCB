ThreadName==Report Generator
ClassName==telsoft.gateway.ext.report.HtmlReportThread2
StartupType==2
Parameter
	ReportDefinition==DefaultConnection\n\tDriver==oracle.jdbc.driver.OracleDriver\n\tUrl==jdbc:oracle:thin:@10.50.197.46:1522:ocsg2\n\tUsername==OCSG_OWNER\n\tPassword==ocsg123\nDataSources\n\tPARTITION\n\t\tSql=:\n\t\t:{\n\nselect table_name, min(partition_name) MIN_PARTITION,max(partition_name) MAX_PARTITION,\n (select count(1) from user_tab_partitions p1 where p1.table_Name = p.table_name and partition_name > 'DATA' || to_char(sysdate,'yyyymmdd') and partition_name <= 'DATA' || to_char(sysdate+7,'yyyymmdd')) d7,\n (select count(1) from user_tab_partitions p1 where p1.table_Name = p.table_name and partition_name > 'DATA' || to_char(sysdate,'yyyymmdd') and partition_name <= 'DATA' || to_char(sysdate+59,'yyyymmdd')) d60\n \nfrom user_tab_partitions p \nwhere table_name not in ('LOG_EPIN_EXPORT','CPS_TRANS_DAILY_ONE','CPS_TRANS_DAILY')\ngroup by table_name\norder by table_name\n\n\t\t:}\n\tDISKGROUP\n\t\tSql=:\n\t\t:{\n\t\t\tselect NAME,STATE,GROUP_NUMBER,TOTAL_MB,FREE_MB,ROUND(Free_MB/Total_MB*100) Free_Percent from v$asm_diskgroup\n\t\t:}\n\tTABLESPACE\n\t\tSql=:\n\t\t:{\n\t\t\tSELECT   tablespace_name,\n\t\t\t         used || ' GB' used,\n\t\t\t         free || ' GB' free,\n\t\t\t         pct_used || '#' pct_used,\n\t\t\t         total || ' GB' total,\n\t\t\t         status \n\t\t\t  FROM   (  SELECT   a.tablespace_name,\n\t\t\t                     ROUND ( ( (c.bytes - NVL (b.bytes, 0)) / c.bytes) * 100,\n\t\t\t                            2)\n\t\t\t                         pct_used,\n\t\t\t                     ROUND (c.bytes / 1024 / 1024 / 1024, 2) total,\n\t\t\t                     ROUND (\n\t\t\t                         c.bytes / 1024 / 1024 / 1024\n\t\t\t                         - NVL (b.bytes, 0) / 1024 / 1024 / 1024,\n\t\t\t                         2)\n\t\t\t                         used,\n\t\t\t                     ROUND (NVL (b.bytes, 0) / 1024 / 1024 / 1024, 2) free,\n\t\t\t                     c.datafiles,\n\t\t\t                     a.status\n\t\t\t              FROM   dba_tablespaces a,\n\t\t\t                     (  SELECT   tablespace_name, SUM (bytes) bytes\n\t\t\t                          FROM   dba_free_space\n\t\t\t                      GROUP BY   tablespace_name) b,\n\t\t\t                     (  SELECT   COUNT (1) datafiles,\n\t\t\t                                 SUM (bytes) bytes,\n\t\t\t                                 tablespace_name\n\t\t\t                          FROM   dba_data_files\n\t\t\t                      GROUP BY   tablespace_name) c\n\t\t\t             WHERE   b.tablespace_name(+) = a.tablespace_name\n\t\t\t                     AND c.tablespace_name(+) = a.tablespace_name\n\t\t\t          ORDER BY   tablespace_name)\n\t\t:}\n\n\tUSER_LOGIN_IN_DAY\n\t\tSql=:\n\t\t:{\n\t\t\tselect \n\t\t\tdecode(user_name,null,'Tổng số',user_name) USER_NAME,\n\t\t\tsum(decode(open_time,null,0,1)) LOGIN,\n\t\t\tsum(decode(close_time,null,0,1)) LOGOUT,\n\t\t\tgrouping(user_name) is_grouped\n\t\t      from gw_session \n\t\t      where open_time >= trunc(sysdate) - 1\n\t\t      and open_time < trunc(sysdate) \n\t\t      group by rollup(user_name)\n\t\t      order by is_grouped,login desc,logout desc\n\t\t:}\n\n\tTRÀFFIC_BY_HOUR\n\t\tSql=:\n\t\t:{\n\t\t\tselect\n\t\t\t\tsum(trans_count) sl,\n\t\t\t\tdecode(status,0,'Thanh cong','That bai') TT,\n\t\t\t\tto_char(sum_date,'HH24') gio\n\t\t\tfrom rpt_gw_trans_daily\n\t\t\twhere sum_date >= trunc(sysdate) - 1\n  \t\t\t  and sum_date < trunc(sysdate) \n\t\t\tgroup by  to_char(sum_date,'HH24'),decode(status,0,'Thanh cong','That bai')\n\t\t\torder by to_char(sum_date,'HH24'),decode(status,0,'Thanh cong','That bai')\n\t\t:}\n\tTRÀFFIC_BY_USER\n\t\tSql=:\n\t\t:{\n\t\t\tselect\n\t\t\tUSER_NAME,\n\t\t\tgateway_name,\n\t\t\tsum(trans_count) TOTAL_,\n\t\t\tsum(decode(status,0,trans_count,0)) SUCCESS_,\n\t\t\tround(sum(decode(status,0,trans_count,0)) / sum(trans_count),4)*100 || '#' percent_suc ,\n\t\t\tsum(decode(status,0,0,trans_count)) FAIL_,\n\t\t\tround(sum(decode(status,0,0,trans_count)) / sum(trans_count),4)*100 || '#'  percent_err \n\t\t\tfrom rpt_gw_trans_daily where\n\t\t\tsum_date < trunc(sysdate) \n\t\t\tand sum_date >= trunc(sysdate) - 1\n\t\t\tand gateway_name is not null\n\t\t\tand user_name is not null\n\t\t\tgroup by USER_NAME,gateway_name\n\t\t\torder by TOTAL_ desc ,SUCCESS_ desc, FAIL_ desc\n\n\t\t:}\n\n\tTIME_GD\n\t\tSql=:\n\t\t:{\n        select  client_type,count(*) TONG_SO_LENH,\n        SUM (case when (TIME_GD='GD_Nhohon5s') then 1 end) GD_Nhohon5s,\n        SUM (case when (TIME_GD='GD_5s_10s')  then 1 end) GD_5s_10s,\n        SUM (case when (TIME_GD='GD_10s_20s') then 1 end) GD_10s_20s,\n        SUM (case when (TIME_GD='GD_20s_30s') then 1 end) GD_20s_30s,\n        SUM (case when (TIME_GD='GD_30s_50s') then 1 end) GD_30s_50s,\n        SUM (case when (TIME_GD='GD_50s_100s') then 1 end) GD_50s_100s,\n        SUM (case when (TIME_GD='GD_Lonhon100s') then 1 end) GD_Lonhon100s\n        from gw_irequest_report\n        where request_time >= trunc(sysdate) - 1\n        and request_time < trunc(sysdate) \n        group by client_type\n\t\t:}\n\n\tTIME_GD_IN\n\t\tSql=:\n        \t:{\n        select  server_type,count(*) TONG_SO_LENH,\n        SUM (case when (TIME_GD_SRV='GD_Nhohon5s') then 1 end) GD_Nhohon5s,\n        SUM (case when (TIME_GD_SRV='GD_5s_10s')  then 1 end) GD_5s_10s,\n        SUM (case when (TIME_GD_SRV='GD_10s_20s') then 1 end) GD_10s_20s,\n        SUM (case when (TIME_GD_SRV='GD_20s_30s') then 1 end) GD_20s_30s,\n        SUM (case when (TIME_GD_SRV='GD_30s_50s') then 1 end) GD_30s_50s,\n        SUM (case when (TIME_GD_SRV='GD_50s_100s') then 1 end) GD_50s_100s,\n        SUM (case when (TIME_GD_SRV='GD_Lonhon100s') then 1 end) GD_Lonhon100s\n        from gw_orequest_report\n        where request_time >= trunc(sysdate) - 1\n        and request_time < trunc(sysdate) \n        group by server_type\n\t\t:}\n\t\t\n\t\t\t\t\t\n\nLayout\n\tHtml\n\t\tScript==\"<h2>Báo cáo IN Gateway định kỳ hàng ngày ( cho ngày \" + com.telsoft.util.StringUtil.format(com.telsoft.util.DateUtil.addDay(new Date(),-1),\"dd/MM/yyyy\") + \")</h2><br>\";\n\tHtml==<h2>Biểu đồ tổng hợp giao dịch theo giờ</h2>\n\tChart==BarChart\n\t\tDataSource==TRÀFFIC_BY_HOUR\n\t\tTitle==\n\t\tRowKeyIndex==1\n\t\tColKeyIndex==2\n\t\tValueIndex==0\n\t\tSource==TRÀFFIC_BY_HOUR\n\t\tCategoryLabel==Gio\n\t\tValueLabel==So luong\n\t\tOrientation==Vertical\n\t\tLegend==1\n\t\tWidth==1000\n\t\tHeight==600\n\t\tLabelAngle==-90\n\t\tStyle\n\t\t\tSeriesColor==0x00FF00,0xFF0000\n\t\t\tItemLabelVisible==1\n\n\tHtml==<br><br>\n\tHtml==<h2>Báo cáo tổng hợp giao dịch theo user</h2>\n\tDataTable\n\t\tDataSource==TRÀFFIC_BY_USER\n\t\tStyle==width:80.0%;border-collapse:collapse;border:1px solid black;\n\t\tGroups\n\t\t\tGroup\n\t\t\t\tSortOrder==Ascending\n\t\t\t\tOrder==0\n\t\t\t\tColumn==TRÀFFIC_BY_USER.USER_NAME\n\t\t\t\tHeader\n\t\t\t\t\tRow\n\t\t\t\t\t\tStyle==background:#11DDFF;font-weight: bold;\n\t\t\t\t\t\tColumn\n\t\t\t\t\t\t\tScript==\"User \" + row[0].toUpperCase()\n\t\t\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\t\t\t\tColSpan==6\n\t\tHeader\n\t\t\tRow\n\t\t\t\tStyle==background:palegreen;font-weight: bold;\n\t\t\t\tColumn\n\t\t\t\t\tValue==Giao thức\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\tColumn\n\t\t\t\t\tValue==Tổng số giao dịch\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\tColumn\n\t\t\t\t\tValue==Tổng số thành công\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\tColumn\n\t\t\t\t\tValue==Tỉ lệ thành công\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\tColumn\n\t\t\t\t\tValue==Tổng số thất bại\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\tColumn\n\t\t\t\t\tValue==Tỉ lệ thất bại\n\t\t\t\t\tStyle==border:1px solid black;\n\t\tBody\n\t\t\tRow\n\t\t\t\tColumn\n\t\t\t\t\tBind==TRÀFFIC_BY_USER.GATEWAY_NAME\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\tColumn\n\t\t\t\t\tBind==TRÀFFIC_BY_USER.TOTAL_\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\t\tNumberFormat==###,###,###\n\t\t\t\tColumn\n\t\t\t\t\tBind==TRÀFFIC_BY_USER.SUCCESS_\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\t\tNumberFormat==###,###,###\n\t\t\t\tColumn\n\t\t\t\t\tBind==TRÀFFIC_BY_USER.PERCENT_SUC\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\t\tNumberFormat==###,###,###.00%\n\t\t\t\tColumn\n\t\t\t\t\tBind==TRÀFFIC_BY_USER.FAIL_\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\t\tNumberFormat==###,###,###\n\t\t\t\tColumn\n\t\t\t\t\tBind==TRÀFFIC_BY_USER.PERCENT_ERR\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\t\tNumberFormat==###,###,###.00%\n\n\tHtml==<br><br>\n\tHtml==<h2>Báo cáo tổng hợp user login/logout</h2>\n\tDataTable\n\t\tDataSource==USER_LOGIN_IN_DAY\n\t\tStyle==width:80.0%;border-collapse:collapse;border:1px solid black;\n\t\tHeader\n\t\t\tRow\n\t\t\t\tStyle==background:palegreen;font-weight: bold;\n\t\t\t\tColumn\n\t\t\t\t\tValue==Username\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\tColumn\n\t\t\t\t\tValue==Số lần login\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\tColumn\n\t\t\t\t\tValue==Số lần logout\n\t\t\t\t\tStyle==border:1px solid black;\n\t\tBody\n\t\t\tRow\n\t\t\t\tColumn\n\t\t\t\t\tBind==USER_LOGIN_IN_DAY.USER_NAME\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\tColumn\n\t\t\t\t\tBind==USER_LOGIN_IN_DAY.LOGIN\n\t\t\t\t\tStyle==border:1px solid black;\n\t\t\t\t\tNumberFormat==###,###,###\n\t\t\t\tColumn\n\t\t\t\t\tBind==USER_LOGIN_IN_DAY.LOGOUT\n\t\t\t\t\tStyle==border:1px solid black;\n\n\tHtml==<br><br>\n\tHtml==<h2>Báo cáo phân bố thời gian giao dịch trên INGW</h2>\n\tDataTable\n\t\tDataSource==TIME_GD\n\t\tStyle==width:100%;border-collapse:collapse;border:0px solid black;\n\n\n\tHtml==<br><br>\n\tHtml==<h2>Báo cáo phân bố thời gian giao dịch trên IN</h2>\n\tDataTable\n\t\tDataSource==TIME_GD_IN\n\t\tStyle==width:100%;border-collapse:collapse;border:0px solid black;\n\n\tHtml==<br><br>\n\tHtml==<h2>Báo cáo trạng thái TABLESPACE</h2>\n\tDataTable\n\t\tDataSource==TABLESPACE\n\t\tStyle==width:100%;border-collapse:collapse;border:0px solid black;\n\t\t\n\tHtml==<br><br>\n\t\n\tHtml==<br><br>\n\tHtml==<h2>Báo cáo trạng thái DISKGROUP</h2>\n\tDataTable\n\t\tDataSource==DISKGROUP\n\t\tStyle==width:100%;border-collapse:collapse;border:0px solid black;\n\t\t\n\tHtml==<br><br>\n\t\n\tHtml==<br><br>\n\tHtml==<h2>Báo cáo trạng thái PARTITION</h2>\n\tDataTable\n\t\tDataSource==PARTITION\n\t\tStyle==width:100%;border-collapse:collapse;border:0px solid black;\n\t\t\n\tHtml==<br><br>
	LastNumberDay==1
	DateFormat==dd/MM/yyyy
	EMAIL
		SSL==N
		Host==10.3.12.27
		Port==25
		User==selfcarehcm
		Password==ph0ng1nhcm03@
		Sender==selfcarehcm@mobifone.vn
		Recipient==hethong.ktmn@mobifone.vn,duc.kt@mobifone.vn
		SubjectFormat==INGW-HCM DAILY REPORT
	ContentFormat==$
	LogDir==log/report
	Alert==Y
	Debug==Y
	SingleSession
	ThreadGroup
	LogDefinition
	DelayTime==10
	NotificationInterval
	NotificationString
	DBUrl==jdbc:oracle:thin:@10.10.10.10:1521:APP
	DBUserName==hlrgw_owner
	DBPassword==ueM3vZZmqi8=
	Reports
	DateTimeFormat==dd/MM/yyyy
	Host==127.0.0.1
	Port==10025
	User==selfcareinhn
	Password==selfcare@1234
	Sender==selfcareinhn@vms.com.vn
	Recipient==khanhnc@telsoft.com.vn
	SubjectFormat==Test
Status==1
Schedule
	Schedule==ScheduleType==0\r\nExecutionTime==1\r\nAdditionValue==1\r\nStartTime==09:00:00\r\nEndTime==10:00:00\r\nExpectedDate==21/06/2019\r\nWeekDay\r\nMonthDay\r\nYearMonth\r\nScheduleID==1\r\nExecutionCount==0\r\n
